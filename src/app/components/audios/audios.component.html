<h1 class="govuk-label-wrapper">
  <label class="govuk-label govuk-label--l" for="case-search">Your Audio</label>
</h1>
<ng-container *ngIf="data$ | async as data; else loading">
  <app-tabs>
    <div *tab="'Current'">
      <p *ngIf="!data.inProgessRows.length && !data.completedRows.length">
        There are no audio files in progress or ready
      </p>

      <ng-container *ngIf="data.inProgessRows.length">
        <h2 class="govuk-heading-m">In Progress</h2>
        <app-data-table [rows]="data.inProgessRows" [columns]="columns" [pagination]="false">
          <ng-template [tableRowTemplate] let-row>
            <td class="govuk-table__cell">
              <a [routerLink]="['/case', row.caseNumber]">{{ row.caseNumber }}</a>
            </td>
            <td class="govuk-table__cell">{{ row.courthouse }}</td>
            <td class="govuk-table__cell">{{ row.hearingDate }}</td>
            <td class="govuk-table__cell">{{ row.startTime }}</td>
            <td class="govuk-table__cell">{{ row.endTime }}</td>
            <td class="govuk-table__cell">{{ row.requestId }}</td>
            <td class="govuk-table__cell">{{ row.expiry }}</td>
            <td class="govuk-table__cell">
              <strong class="govuk-tag govuk-tag--yellow"> {{ row.status }} </strong>
            </td>
          </ng-template>
        </app-data-table>
      </ng-container>

      <ng-container *ngIf="data.completedRows.length">
        <h2 class="govuk-heading-m">Ready</h2>
        <div class="govuk-hint">Select to apply actions</div>
        <app-data-table [rows]="data.completedRows" [columns]="columns">
          <ng-template [tableRowTemplate] let-row>
            <td class="govuk-table__cell">
              <a [routerLink]="['case', row.caseNumber]">{{ row.caseNumber }}</a>
            </td>
            <td class="govuk-table__cell">{{ row.courthouse }}</td>
            <td class="govuk-table__cell">{{ row.hearingDate }}</td>
            <td class="govuk-table__cell">{{ row.startTime }}</td>
            <td class="govuk-table__cell">{{ row.endTime }}</td>
            <td class="govuk-table__cell">{{ row.requestId }}</td>
            <td class="govuk-table__cell">{{ row.expiry }}</td>
            <td class="govuk-table__cell status-cell">
              <strong class="govuk-tag govuk-tag--green"> {{ row.status }} </strong>
              <a [routerLink]="['view', row.requestId]">View</a>
            </td>
          </ng-template>
        </app-data-table>
      </ng-container>
    </div>
    <div *tab="'Expired'">
      <ng-container *ngIf="data.expiredRows.length">
        <div class="govuk-hint">Select to apply actions</div>
        <app-data-table [rows]="data.expiredRows" [columns]="columns"></app-data-table>
      </ng-container>
    </div>
  </app-tabs>
</ng-container>
<ng-template #loading>
  <app-loading text="Loading audio requests..."></app-loading>
</ng-template>
