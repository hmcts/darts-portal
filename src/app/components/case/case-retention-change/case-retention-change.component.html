<h1 class="govuk-heading-l">Change case retention date</h1>
<!-- Validation Error Summary Component -->
<app-validation-error-summary [errors]="errors"></app-validation-error-summary>
<div class="govuk-form-group">
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h1 class="govuk-fieldset__heading">Select a new retention date</h1>
    </legend>
    <div id="change-radios" class="govuk-radios govuk-details" data-module="govuk-radios">
      <div class="govuk-radios__item">
        <input
          class="govuk-radios__input"
          id="retentionDateOption"
          name="retentionOptions"
          type="radio"
          [formControl]="retainOptionFormControl"
          (click)="onChange()"
          value="date"
        />
        <label class="govuk-label govuk-radios__label" for="retentionOption">Retain until a specific date</label>
      </div>
      <div *ngIf="retainOptionFormControl.value === 'date'" class="govuk-radios__conditional" id="change-date">
        <div data-module="ds-datepicker" class="ds_datepicker">
          <label class="ds_label" for="retention_date">Enter a date to retain the case until</label>
          <p class="ds_hint-text">Use dd/mm/yyyy format. For example, 31/01/2023.</p>
          <!-- Error message if date invalid -->
          <div *ngIf="isDateInvalid()" id="retention_date-errors">
            <p class="govuk-error-message">
              <span class="govuk-visually-hidden">Error:</span>You have not entered a recognised date in the correct
              format (for example 31/01/2023)
            </p>
          </div>
          <div class="ds_input__wrapper">
            <input
              aria-label="Enter a date in dd/mm/yyyy format"
              [formControl]="retainDateFormControl"
              name="retention_date"
              id="retention_date"
              type="text"
              class="ds_input ds_input--fixed-10"
              (change)="setDateValue($any($event).target.value)"
              [class.govuk-input--error]="isDateInvalid()"
            />
          </div>
        </div>
      </div>
      <div class="govuk-radios__item">
        <input
          class="govuk-radios__input"
          id="retentionOption-2"
          name="retentionOptions"
          type="radio"
          [formControl]="retainOptionFormControl"
          (click)="onChange()"
          value="permanent"
        />
        <label class="govuk-label govuk-radios__label" for="retentionOption-2">Retain permanently (99 years)</label>
      </div>
    </div>
    <div class="govuk-form-group reason-box">
      <label class="govuk-label govuk-!-font-weight-bold" for="change-reason">Why are you making this change?</label>
      <textarea
        class="govuk-textarea govuk-!-width-one-half"
        id="change-reason"
        name="reason"
        rows="5"
        aria-describedby="change-reason-hint"
        [formControl]="retainReasonFormControl"
        [maxlength]="rententionCharacterLimit"
      ></textarea>
      <div id="change-reason-hint" class="govuk-hint">
        You have {{ remainingCharacterCount }} character{{ remainingCharacterCount === 1 ? '' : 's' }} remaining
      </div>
    </div>
    <div class="govuk-button-group">
      <button class="govuk-button" data-module="govuk-button" (click)="onConfirm()">Continue</button>
      <a href="#" (click)="onCancel($event)" class="govuk-link">Cancel</a>
    </div>
  </fieldset>
</div>
