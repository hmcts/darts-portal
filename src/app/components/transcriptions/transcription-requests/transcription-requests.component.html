<h1 class="govuk-heading-l">Transcript requests</h1>

@if (transcriptRequests$ | async; as rows) {
  <app-data-table
    id="transcript-requests-table"
    [rows]="rows"
    [columns]="columns"
    noDataMessage="There are no outstanding transcript requests."
  >
    <ng-template [tableRowTemplate]="rows" let-row>
      <td class="govuk-table__cell">{{ row.case_number }}</td>
      <td class="govuk-table__cell">{{ row.courthouse_name }}</td>
      <td class="govuk-table__cell">{{ row.hearing_date | date: 'dd MMM yyyy' }}</td>
      <td class="govuk-table__cell">{{ row.transcription_type }}</td>
      <td class="govuk-table__cell">{{ row.requested_ts | date: 'dd MMM yyyy HH:mm' }}</td>
      <td class="govuk-table__cell">{{ row.is_manual ? 'Manual' : 'Automated' }}</td>
      <td class="govuk-table__cell">
        <span [ngClass]="row.urgency === 'Overnight' ? 'moj-badge moj-badge--red' : ''">{{ row.urgency }}</span>
      </td>
      <td class="govuk-table__cell">
        <a [routerLink]="[row.transcription_id]">View</a>
      </td>
    </ng-template>
  </app-data-table>
} @else {
  <app-loading text="Loading transcription requests..." />
}
