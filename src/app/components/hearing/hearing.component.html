<ng-container *ngIf="data$ | async as vm; else loading">
  <div [hidden]="state !== 'Default'">
    <app-hearing-file [case]="vm.case" [hearing]="vm.hearing"></app-hearing-file>
    <h2 id="events-audio-heading" class="govuk-heading-m">Events and audio recordings</h2>
    <app-request-playback-audio
      [hearing]="vm.hearing!"
      [requestAudioTimes]="requestAudioTimes"
      (audioRequest)="onAudioRequest($event)"
    ></app-request-playback-audio>
    <app-events-and-audio
      [audio]="vm.audios"
      [events]="vm.events"
      (eventsSelect)="onEventsSelected($event)"
    ></app-events-and-audio>
  </div>
  <div [hidden]="state !== 'OrderSummary'">
    <app-order-summary
      [case]="vm.case"
      [hearing]="vm.hearing"
      [audioRequest]="requestObject"
      (stateChange)="onStateChanged($event)"
    ></app-order-summary>
  </div>
  <div [hidden]="state !== 'OrderConfirmation'" class="order-confirmation">
    <app-order-confirmation
      [case]="vm.case"
      [hearing]="vm.hearing"
      [audioRequest]="requestObject"
      (stateChange)="onStateChanged($event)"
    ></app-order-confirmation>
  </div>
</ng-container>

<ng-template #loading>Loading...</ng-template>
