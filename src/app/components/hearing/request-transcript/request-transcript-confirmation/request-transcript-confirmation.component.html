<h1 class="govuk-heading-l">Check and confirm your transcript request</h1>

<table class="govuk-table">
  <caption class="govuk-table__caption govuk-table__caption--m">
    Case Details
  </caption>
  <tbody class="govuk-table__body">
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Case ID</th>
      <td class="govuk-table__cell">{{ case.case_number }}</td>
    </tr>
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Courthouse</th>
      <td class="govuk-table__cell">{{ case.courthouse }}</td>
    </tr>
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Defendant(s)</th>
      <td class="govuk-table__cell">{{ case.defendants | join }}</td>
    </tr>
  </tbody>
</table>

<table class="govuk-table">
  <caption class="govuk-table__caption govuk-table__caption--m">
    Request Details
  </caption>
  <tbody class="govuk-table__body">
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Hearing date</th>
      <td class="govuk-table__cell">{{ hearing.date | date: 'dd MMM yyyy' }}</td>
    </tr>
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Request type</th>
      <td class="govuk-table__cell">{{ transcriptionType }}</td>
    </tr>
    <tr class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Urgency</th>
      <td class="govuk-table__cell">{{ urgency }}</td>
    </tr>
    <tr *ngIf="audioTimes" id="audio-times" class="govuk-table__row">
      <th scope="row" class="govuk-table__header">Audio for Transcript</th>
      <td class="govuk-table__cell">
        Start time {{ audioTimes.startTime?.toFormat('HH:mm:ss') }} - End time
        {{ audioTimes.endTime?.toFormat('HH:mm:ss') }}
      </td>
    </tr>
  </tbody>
</table>

<div class="govuk-form-group margin-top-10">
  <h1 class="govuk-label-wrapper">
    <label class="govuk-label govuk-label--m" for="more-detail"> Comments to the Transcriber (optional) </label>
  </h1>
  <div id="more-detail-hint" class="govuk-hint">Provide any further instructions or comments for the transcriber.</div>
  <textarea
    class="govuk-textarea"
    id="more-detail"
    name="moreDetail"
    rows="5"
    aria-describedby="more-detail-hint"
    [formControl]="moreDetailFormControl"
    maxlength="2000"
  ></textarea>
  <div id="more-detail-hint" class="govuk-hint">
    You have {{ remainingCharacterCount }} character{{ remainingCharacterCount === 1 ? '' : 's' }} remaining
  </div>
</div>

<div class="govuk-form-group" [class.govuk-form-group--error]="isSubmitted && !authorisationFormControl.value">
  <p id="authorisation-error" *ngIf="isSubmitted && !authorisationFormControl.value" class="govuk-error-message">
    <span class="govuk-visually-hidden">Error:</span> You must have authorisation from a judge to confirm this request.
  </p>
  <div class="govuk-checkboxes">
    <div class="govuk-checkboxes__item">
      <input
        [formControl]="authorisationFormControl"
        class="govuk-checkboxes__input"
        id="authorisation"
        type="checkbox"
      />
      <label class="govuk-label govuk-checkboxes__label" for="authorisation">
        I confirm I have received authorisation from the judge.
      </label>
    </div>
  </div>
</div>

<div class="govuk-button-group">
  <button class="govuk-button" data-module="govuk-button" (click)="onSubmit()">Submit request</button>
  <a class="govuk-link" href="#" (click)="$event.preventDefault(); onCancel()">Cancel</a>
</div>
