@if (formSubmitted) {
  <div
    class="govuk-notification-banner govuk-notification-banner--success"
    role="alert"
    aria-labelledby="govuk-notification-banner-title"
    data-module="govuk-notification-banner"
  >
    <div class="govuk-notification-banner__header">
      <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Success</h2>
    </div>
    <div class="govuk-notification-banner__content">
      <p class="govuk-notification-banner__heading">
        Youâ€™ve set your cookie preferences.
        <a class="govuk-notification-banner__link" href="javascript:void(0)" (click)="location.back()"
          >Go back to the page you were looking at</a
        >.
      </p>
    </div>
  </div>
}

<main id="main-content" class="govuk-main-wrapper govuk-main-wrapper--l" role="main">
  <div class="app-width-container">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <div class="app-cookies-page" data-module="app-cookies-page">
          <h1 class="govuk-heading-xl">Cookies</h1>
          <p class="govuk-body">
            Cookies are small files saved on your phone, tablet or computer when you visit a website.
          </p>

          <p class="govuk-body">
            We use cookies to make this site work and collect information about how you use our service.
          </p>

          <form class="js-cookies-page-form" [formGroup]="cookieForm" (submit)="submit()">
            <h2 class="govuk-heading-l govuk-!-margin-top-6">Essential cookies</h2>

            <p class="govuk-body">
              Essential cookies keep your information secure while you use this service. We do not need to ask
              permission to use them.
            </p>

            <table class="govuk-table">
              <thead>
                <tr class="govuk-table__row">
                  <th scope="col" class="govuk-table__header">Name</th>
                  <th scope="col" class="govuk-table__header">Purpose</th>
                  <th scope="col" class="govuk-table__header">Expires</th>
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                  <th class="govuk-table__cell">darts_session</th>
                  <td class="govuk-table__cell">Essential session cookie</td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
                <tr class="govuk-table__row">
                  <th class="govuk-table__cell">cookie_policy</th>
                  <td class="govuk-table__cell">Save your cookie consent settings</td>
                  <td class="govuk-table__cell">1 year</td>
                </tr>
              </tbody>
            </table>

            <h2 class="govuk-heading-l govuk-!-margin-top-6">Measuring website usage (optional)</h2>

            <p class="govuk-body">
              We use Azure Application Insights software to collect information about how you use this website. We do
              this to help make sure the site is meeting the needs of its users and to help us make improvements.
            </p>

            <p class="govuk-body">Azure Application Insights stores information about::</p>

            <ul class="govuk-list govuk-list--bullet">
              <li>the pages you visit on this website</li>
              <li>how long you spend on each page</li>
              <li>how you got to the site</li>
              <li>what you click on while you visit the site</li>
            </ul>

            <p class="govuk-body">
              We don't collect or store your personal information (for example your name or address) so this information
              can't be used to identify who you are.
            </p>

            <p class="govuk-body">We don't allow Microsoft to use or share our analytics data.</p>

            <p class="govuk-body">Azure Application Insights sets the following cookies</p>

            <table class="govuk-table">
              <thead>
                <tr class="govuk-table__row">
                  <th scope="col" class="govuk-table__header">Name</th>
                  <th scope="col" class="govuk-table__header">Purpose</th>
                  <th scope="col" class="govuk-table__header">Expires</th>
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                  <th class="govuk-table__cell">ai_user</th>
                  <td class="govuk-table__cell">
                    This helps us to identify the number of distinct users accessing the site over time by tracking if
                    you've visited before
                  </td>
                  <td class="govuk-table__cell">1 year</td>
                </tr>
                <tr class="govuk-table__row">
                  <th class="govuk-table__cell">ai_session</th>
                  <td class="govuk-table__cell">
                    This helps us track activity happening over a single browser session
                  </td>
                  <td class="govuk-table__cell">1 hour</td>
                </tr>
              </tbody>
            </table>

            <div class="govuk-form-group">
              <fieldset class="govuk-fieldset js-cookies-page-form-fieldset" data-cookie-type="analytics">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                  Do you want to accept website usage cookies?
                </legend>
                <div class="govuk-radios" data-module="govuk-radios">
                  <div class="govuk-radios__item">
                    <input
                      class="govuk-radios__input"
                      formControlName="appInsightsCookiesEnabled"
                      id="cookies-app-insights"
                      name="appInsightsCookiesEnabled"
                      type="radio"
                      [value]="true"
                    />
                    <label class="govuk-label govuk-radios__label" for="cookies-analytics"> Yes </label>
                  </div>
                  <div class="govuk-radios__item">
                    <input
                      class="govuk-radios__input"
                      formControlName="appInsightsCookiesEnabled"
                      id="cookies-app-insights-2"
                      name="appInsightsCookiesEnabled"
                      type="radio"
                      [value]="false"
                    />
                    <label class="govuk-label govuk-radios__label" for="cookies-analytics-2"> No </label>
                  </div>
                </div>
              </fieldset>
            </div>

            <!--  -->
            <h2 class="govuk-heading-l govuk-!-margin-top-6">Measure application performance (optional)</h2>

            <p class="govuk-body">
              We use Dynatrace Software Intelligence Platform to provide an Application Performance Monitoring Service
              to collect information about how you use HMCTS services. We do this to monitor HMCTS services in order to
              resolve issues within our services as well as collect data on how our services can be improved. HMCTS
              store information about:
            </p>

            <ul class="govuk-list govuk-list--bullet">
              <li>site performance</li>
              <li>website usage</li>
              <li>user behaviour</li>
            </ul>

            <p class="govuk-body">
              Information is presented within the Application Performance Monitoring service for the purposes detailed
              above. We do not use or share the information for any other purpose. We do not allow Dynatrace to use or
              share the information for any other purposes.
            </p>

            <table class="govuk-table">
              <thead>
                <tr class="govuk-table__row">
                  <th scope="col" class="govuk-table__header">Name</th>
                  <th scope="col" class="govuk-table__header">Purpose</th>
                  <th scope="col" class="govuk-table__header">Expires</th>
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">dtCookie</th>
                  <td class="govuk-table__cell">Tracks a visit across multiple request</td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">dtLatC</th>
                  <td class="govuk-table__cell">Measures server latency for performance monitoring</td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">dtPC</th>
                  <td class="govuk-table__cell">
                    Required to identify proper endpoints for beacon transmission; includes session ID for correlation
                  </td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">dtSa</th>
                  <td class="govuk-table__cell">Intermediate store for page-spanning actions</td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">rxVisitor</th>
                  <td class="govuk-table__cell">Visitor ID to correlate sessions</td>
                  <td class="govuk-table__cell">1 year</td>
                </tr>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header">rxvt</th>
                  <td class="govuk-table__cell">Session timeout</td>
                  <td class="govuk-table__cell">Session end</td>
                </tr>
              </tbody>
            </table>

            <div class="govuk-form-group">
              <fieldset class="govuk-fieldset js-cookies-page-form-fieldset" data-cookie-type="analytics">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                  Do you want to accept application performance cookies?
                </legend>
                <div class="govuk-radios" data-module="govuk-radios">
                  <div class="govuk-radios__item">
                    <input
                      class="govuk-radios__input"
                      id="cookies-dynatrace"
                      formControlName="dynatraceCookiesEnabled"
                      name="dynatraceCookiesEnabled"
                      type="radio"
                      [value]="true"
                    />
                    <label class="govuk-label govuk-radios__label" for="cookies-analytics"> Yes </label>
                  </div>
                  <div class="govuk-radios__item">
                    <input
                      class="govuk-radios__input"
                      id="cookies-dynatrace-2"
                      formControlName="dynatraceCookiesEnabled"
                      name="dynatraceCookiesEnabled"
                      type="radio"
                      [value]="false"
                    />
                    <label class="govuk-label govuk-radios__label" for="cookies-analytics-2"> No </label>
                  </div>
                </div>
              </fieldset>
            </div>

            <button type="submit" class="govuk-button js-cookies-form-button" data-module="govuk-button">
              Save cookie settings
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
