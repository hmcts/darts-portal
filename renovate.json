{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["local>hmcts/.github:renovate-config", "local>hmcts/.github//renovate/automerge-minor"],
  "packageRules": [
    {
      "matchPackageNames": ["@ministryofjustice/frontend"],
      "enabled": false
    },
    {
      "matchPackageNames": ["connect-redis"],
      "matchUpdateTypes": ["major"],
      "dependencyDashboardApproval": true,
      "automerge": false,
      "prBodyNotes": [
        "**Known breaking change:** `connect-redis` v9 drops `ioredis` support. If your app uses `ioredis`, stay on v8 or migrate to `redis@5+` before upgrading."
      ],
      "labels": ["pkg:connect-redis", "breaking-change"]
    },
    {
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "dependencyDashboardApproval": true,
      "labels": ["renovate:major", "breaking-change"],
      "prHeader": "{{#if isMajor}}> ⚠️ **Major update**: {{depName}} {{currentVersion}} → {{newVersion}}{{/if}}",
      "prBodyNotes": [
        "{{#if (and isMajor hasReleaseNotes)}}**Review these release notes for breaking changes:**{{/if}}",
        "{{#if (and isMajor hasReleaseNotes)}}{{{releaseNotes}}}{{/if}}",
        "{{#if (and isMajor (not hasReleaseNotes))}}No release notes found. Visit: {{url}}{{/if}}"
      ]
    }
  ]
}
